(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const $="modulepreload",T=function(c){return"/"+c},P={},A=function(r,t,n){let e=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));e=Promise.allSettled(t.map(g=>{if(g=T(g),g in P)return;P[g]=!0;const d=g.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${p}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":$,d||(u.as="script"),u.crossOrigin="",u.href=g,a&&u.setAttribute("nonce",a),document.head.appendChild(u),d)return new Promise((m,h)=>{u.addEventListener("load",m),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return e.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return r().catch(o)})},s={toast:document.getElementById("toast"),modeSwitcher:document.getElementById("mode-switcher"),layoutModeBtn:document.getElementById("layout-mode-btn"),stitchingModeBtn:document.getElementById("stitching-mode-btn"),layoutWrapper:document.getElementById("layout-wrapper"),layoutGrid:document.getElementById("layout-grid"),stitchingWrapper:document.getElementById("stitching-wrapper"),stitchingGrid:document.getElementById("stitching-grid"),layoutControls:document.getElementById("layout-controls"),stitchingControls:document.getElementById("stitching-controls"),layoutContainer:document.getElementById("layout-container"),stitchingDirectionBtns:document.getElementById("stitching-direction-btns"),stitchingUploadBtn:document.getElementById("stitching-upload-btn"),stitchingUploadInput:document.getElementById("stitching-upload-input"),canvasSettings:document.getElementById("canvas-settings"),aspectRatioBtns:document.getElementById("aspect-ratio-btns"),spacingSlider:document.getElementById("spacing-slider"),spacingValue:document.getElementById("spacing-value"),radiusSlider:document.getElementById("radius-slider"),radiusValue:document.getElementById("radius-value"),colorPicker:document.getElementById("color-picker"),shuffleBtn:document.getElementById("shuffle-btn"),downloadBtn:document.getElementById("download-btn")},y=(c,r)=>{const t=document.createElement(c);return r&&(t.className=r),t},S={upload:'<div class="upload-icon"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"></path></svg></div>',remove:'<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>'},i={currentMode:"layout",currentLayoutId:"2-t1b1",imagesData:{},colFractions:[],rowFractions:[],stitchingImages:[],stitchingDirection:"horizontal"};function O(c){i.currentLayoutId=c}const C={"2-t1b1":{g:2,gr:[2,1],c:[{r:1,c:1},{r:1,c:1}]},"2-l1r1":{g:2,gr:[1,2],c:[{r:1,c:1},{r:1,c:1}]},"3-t1b2":{g:3,gr:[2,2],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1}]},"3-t2b1":{g:3,gr:[2,2],c:[{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"3-l1r2":{g:3,gr:[2,2],c:[{r:2,c:1},{r:1,c:1},{r:1,c:1}]},"3-l2r1":{g:3,gr:[2,2],c:[{r:1,c:1},{r:2,c:1},{r:1,c:1}]},"3-l1rr":{g:3,gr:[3,3],c:[{r:3,c:2},{r:1,c:1},{r:2,c:1}]},"3-t1bb":{g:3,gr:[3,3],c:[{r:2,c:3},{r:1,c:1},{r:1,c:2}]},"4-grid":{g:4,gr:[2,2]},"4-t1b3":{g:4,gr:[2,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"4-b1t3":{g:4,gr:[2,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3}]},"4-l1r3":{g:4,gr:[3,2],c:[{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"4-l-feat":{g:4,gr:[2,3],c:[{r:2,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1}]},"4-r-feat":{g:4,gr:[2,3],c:[{r:1,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1,s:[2,1]}]},"4-121":{g:4,gr:[3,2],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"4-212":{g:4,gr:[2,3],c:[{r:2,c:1},{r:1,c:1},{r:2,c:1},{r:1,c:1}]},"4-g3x2-alt":{g:4,gr:[3,2],c:[{r:2,c:1},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[1,2]},{r:2,c:1,s:[2,2]}]},"5-center":{g:5,gr:[3,3],c:[{r:1,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:1},{r:1,c:2}]},"5-l3r2":{g:5,gr:[3,3],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1}]},"5-131":{g:5,gr:[3,3],c:[{r:3,c:1},{r:1,c:1},{r:3,c:1},{r:1,c:1},{r:1,c:1}]},"5-l2r3":{g:5,gr:[3,2],c:[{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-t2b3":{g:5,gr:[2,3],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-center-h-bar":{g:5,gr:[3,2],c:[{r:1,c:1},{r:1,c:1,s:[1,2]},{r:1,c:2,s:[2,1]},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[3,2]}]},"5-t2b3-split":{g:5,gr:[2,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"5-l1r4-col":{g:5,gr:[4,2],c:[{r:4,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-t-feat-r":{g:5,gr:[2,3],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-t1b4-grid":{g:5,gr:[3,2],c:[{r:1,c:2},{r:1,c:1,s:[2,1]},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[3,2]}]},"5-r1l4-col":{g:5,gr:[4,2],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:4,c:1,s:[1,2]}]},"5-cross-center":{g:5,gr:[3,3],c:[{r:1,c:3},{r:1,c:1,s:[2,1]},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[2,3]},{r:1,c:3,s:[3,1]},{r:1,c:1,s:[2,2]}]},"5-l-tall-r-split":{g:5,gr:[3,3],c:[{r:3,c:1},{r:1,c:2},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[2,3]},{r:1,c:2,s:[3,2]}]},"5-213":{g:5,gr:[2,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-123":{g:5,gr:[2,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3}]},"6-g3x2":{g:6,gr:[3,2]},"6-g2x3":{g:6,gr:[2,3]},"6-center":{g:6,gr:[4,4],c:[{r:1,c:3},{r:2,c:1},{r:3,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:2}]},"6-123":{g:6,gr:[3,6],c:[{r:1,c:6},{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"6-321":{g:6,gr:[3,6],c:[{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:3},{r:1,c:3},{r:1,c:6}]},"6-231":{g:6,gr:[3,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:6}]},"6-222":{g:6,gr:[3,3],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:2},{r:1,c:1}]},"6-1133":{g:6,gr:[4,3],c:[{r:2,c:3},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:1,c:1},{r:1,c:1}]},"6-223r":{g:6,gr:[3,3],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"6-223l":{g:6,gr:[3,3],c:[{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"6-114":{g:6,gr:[3,5],c:[{r:2,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"6-3333":{g:6,gr:[4,4],c:[{r:2,c:2},{r:2,c:1},{r:2,c:1},{r:2,c:1},{r:2,c:1},{r:2,c:2}]},"7-main":{g:7,gr:[4,4],c:[{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-h-center-band":{g:7,gr:[3,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-w-center-band":{g:7,gr:[3,3],c:[{r:1,c:1},{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-feat-l":{g:7,gr:[4,2],c:[{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-feat-t":{g:7,gr:[4,2],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:1,c:1}]},"7-311":{g:7,gr:[3,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-113":{g:7,gr:[3,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3}]},"7-232":{g:7,gr:[3,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:3},{r:1,c:3}]},"7-124":{g:7,gr:[3,4],c:[{r:2,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-323":{g:7,gr:[3,4],c:[{r:1,c:1},{r:2,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-313":{g:7,gr:[4,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-331":{g:7,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:3},{r:1,c:1},{r:1,c:1}]},"7-233":{g:7,gr:[4,6],c:[{r:2,c:3},{r:2,c:3},{r:1,c:2},{r:2,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"7-333":{g:7,gr:[3,3],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"7-346":{g:7,gr:[4,6],c:[{r:1,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:2},{r:2,c:3},{r:1,c:3},{r:1,c:3}]},"8-g4x2":{g:8,gr:[4,2]},"8-g2x4":{g:8,gr:[2,4]},"8-222":{g:8,gr:[4,4],c:[{r:1,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:2},{r:1,c:2}]},"8-l2-tall-r6-grid":{g:8,gr:[3,4],c:[{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"8-sandwich-6":{g:8,gr:[4,3],c:[{r:1,c:3},{r:1,c:1,s:[2,1]},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[2,3]},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[3,2]},{r:1,c:1,s:[3,3]},{r:1,c:3,s:[4,1]}]},"8-313":{g:8,gr:[5,4],c:[{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:2,c:2}]},"8-131":{g:8,gr:[4,5],c:[{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1}]},"8-134":{g:8,gr:[4,4],c:[{r:3,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"8-431":{g:8,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:3},{r:1,c:1},{r:1,c:1}]},"8-323":{g:8,gr:[3,6],c:[{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"8-363":{g:8,gr:[6,3],c:[{r:2,c:1},{r:3,c:1},{r:2,c:1},{r:2,c:1},{r:2,c:1},{r:3,c:1},{r:2,c:1},{r:2,c:1}]},"8-344":{g:8,gr:[4,4],c:[{r:1,c:1},{r:2,c:1},{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1}]},"9-grid":{g:9,gr:[3,3]},"9-144-grid":{g:9,gr:[3,4],c:[{r:1,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-414-grid":{g:9,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-441-grid":{g:9,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:4}]},"9-211-grid":{g:9,gr:[3,4],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-112-grid":{g:9,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1}]},"9-434-grid":{g:9,gr:[4,4],c:[{r:1,c:1},{r:4,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-344-grid":{g:9,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-424-grid":{g:9,gr:[4,4],c:[{r:2,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1}]},"9-116-grid":{g:9,gr:[6,6],c:[{r:3,c:3},{r:3,c:3},{r:3,c:3},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-611-grid":{g:9,gr:[6,6],c:[{r:2,c:2},{r:1,c:1},{r:3,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:3},{r:3,c:3}]},"9-cen-grid":{g:9,gr:[4,4],c:[{r:1,c:2},{r:1,c:2},{r:2,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-g5x2":{g:10,gr:[5,2]},"10-t2b8-grid":{g:10,gr:[3,4],c:[{r:1,c:2},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-424-grid":{g:10,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-4x3-grid":{g:10,gr:[4,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-5x5-grid":{g:10,gr:[5,5],c:[{r:4,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-4x4-grid":{g:10,gr:[4,4],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1}]},"10-8x8-grid":{g:10,gr:[8,8],c:[{r:4,c:4},{r:4,c:4},{r:4,c:4},{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-442-grid":{g:10,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-6x6-grid":{g:10,gr:[6,6],c:[{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:2},{r:2,c:2},{r:1,c:2},{r:2,c:2},{r:2,c:2},{r:2,c:2}]},"11-4c4-t":{g:11,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"11-4x4-t":{g:11,gr:[4,4],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1}]},"11-4x6-t":{g:11,gr:[4,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"11-feat-t":{g:11,gr:[3,5],c:[{r:1,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"11-feat-c":{g:11,gr:[3,5],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"11-feat-f":{g:11,gr:[3,5],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:5}]},"12-g4x3":{g:12,gr:[4,3]},"12-g3x4":{g:12,gr:[3,4]},"12-g6x6":{g:12,gr:[6,6],c:[{r:5,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"13-feat-c":{g:13,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"13-211":{g:13,gr:[4,4],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"13-112":{g:13,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1}]},"14-g7x2":{g:14,gr:[7,2]},"14-g4x4r":{g:14,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"14-g4x4c":{g:14,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"15-g5x3":{g:15,gr:[5,3]},"15-g4x4c":{g:15,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"15-g4x4f":{g:15,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"16-g4x4":{g:16,gr:[4,4]}};function v(c,r="success"){s.toast.textContent=c,s.toast.className="fixed bottom-5 right-5 text-white py-2 px-4 rounded-lg shadow-xl translate-x-[120%] transition-transform duration-300";const t={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};s.toast.classList.add(t[r]||"bg-gray-500"),s.toast.classList.remove("translate-x-[120%]"),setTimeout(()=>{s.toast.classList.add("translate-x-[120%]")},3e3)}function w(){const c=s.spacingSlider.value,r=s.radiusSlider.value,t=s.colorPicker.value;if(s.spacingValue.textContent=c,s.radiusValue.textContent=r,i.currentMode==="layout"){const n=s.layoutWrapper,e=s.layoutGrid;n.style.backgroundColor=t,e.style.padding=`${c}px`,e.style.gap=`${c}px`,e.querySelectorAll(".grid-cell").forEach(o=>{o.style.borderRadius=`${r}px`})}else{const n=s.stitchingWrapper,e=s.stitchingGrid;n.style.backgroundColor=t,n.style.padding=`${c}px`,e.style.gap=`${c}px`,e.querySelectorAll("img").forEach(o=>{o.style.borderRadius=`${r}px`})}}function E(c,r,t="50% 50%"){const n=document.getElementById(c);if(!n)return;n.style.backgroundImage=`url(${r})`,n.style.backgroundPosition=t,n.classList.add("has-image");const e=n.querySelector(".upload-icon-container");e&&e.classList.add("hidden")}function R(c){const r=document.getElementById(c);if(!r)return;r.style.backgroundImage="",r.classList.remove("has-image");const t=r.querySelector(".upload-icon-container");t&&t.classList.remove("hidden")}function B(){let c=0;i.currentMode==="layout"?c=Object.keys(i.imagesData).length:c=i.stitchingImages.length,s.shuffleBtn.disabled=c<2}function F(c){if(c===i.currentMode)return;i.currentMode=c;const r=c==="layout";s.layoutControls.classList.toggle("hidden",!r),s.stitchingControls.classList.toggle("hidden",r),s.canvasSettings.classList.toggle("hidden",!r),s.layoutWrapper.classList.toggle("hidden",!r),s.stitchingWrapper.classList.toggle("hidden",r),s.layoutModeBtn.classList.toggle("active",r),s.stitchingModeBtn.classList.toggle("active",!r),B(),b()}function W(c){c!==i.stitchingDirection&&(i.stitchingDirection=c,document.querySelector("#stitching-direction-btns .active").classList.remove("active"),document.querySelector(`#stitching-direction-btns [data-direction="${c}"]`).classList.add("active"),b())}function q(c){var r,t;i.currentMode!=="layout"||c===i.currentLayoutId||((r=s.layoutContainer.querySelector(".active"))==null||r.classList.remove("active"),(t=s.layoutContainer.querySelector(`[data-layout="${c}"]`))==null||t.classList.add("active"),O(c),b())}function U(c){var t;if(i.currentMode!=="layout")return;(t=s.aspectRatioBtns.querySelector(".active"))==null||t.classList.remove("active"),c.classList.add("active");const r=c.dataset.ratio;s.layoutWrapper.style.aspectRatio=r,s.layoutWrapper.style.height="auto",s.layoutWrapper.style.minHeight="0",setTimeout(I,100)}function D(c){if(!c||c.length===0)return;const r=Array.from(c).filter(t=>t.type.startsWith("image/"));if(r.length===0){v("未选择有效的图片文件","error");return}if(i.currentMode==="layout"){const n=Array.from(document.querySelectorAll("#layout-grid .grid-cell")).map(l=>l.id).filter(l=>!i.imagesData[l]);if(n.length===0){v("没有空的格子可以放置图片","error");return}const e=Math.min(r.length,n.length);let o=0;for(let l=0;l<e;l++){const a=r[l],g=n[l],d=new FileReader;d.onload=p=>{if(i.imagesData[g]={src:p.target.result,position:"50% 50%"},E(g,i.imagesData[g].src,i.imagesData[g].position),o++,o===e){B();const u=`成功上传 ${e} 张图片。`+(r.length>e?` 已忽略 ${r.length-e} 张多余的图片。`:"");v(u,"success")}},d.readAsDataURL(a)}}else{const t=r.map(n=>new Promise(e=>{const o=new FileReader;o.onload=l=>e(l.target.result),o.readAsDataURL(n)}));Promise.all(t).then(n=>{i.stitchingImages=n,v(`成功选择 ${n.length} 张图片`,"success"),B(),b()})}}function G(){let c=0;if(i.currentMode==="layout"){const r=Object.entries(i.imagesData);if(c=r.length,c<2)return;const t=r.map(n=>n[1]);for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}r.forEach(([n],e)=>{i.imagesData[n]=t[e],E(n,t[e].src,t[e].position)})}else{if(c=i.stitchingImages.length,c<2)return;for(let r=i.stitchingImages.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[i.stitchingImages[r],i.stitchingImages[t]]=[i.stitchingImages[t],i.stitchingImages[r]]}b()}c>1&&v("图片已随机排序","info")}function X(c,r){if(i.currentMode!=="layout"||!r)return;const t={...i.imagesData[c]},n={...i.imagesData[r]};t.src&&(t.position="50% 50%"),n.src&&(n.position="50% 50%"),i.imagesData[c]=n,n.src?E(c,n.src,n.position):(delete i.imagesData[c],R(c)),i.imagesData[r]=t,E(r,t.src,t.position)}function Y(c){i.currentMode==="layout"&&(delete i.imagesData[c],R(c),B())}function j(){const c=i.currentMode==="layout"?s.layoutGrid:s.stitchingGrid;c.querySelectorAll(".gutter").forEach(t=>t.style.display="none"),v("正在生成高清晰度图片...","info");const r={useCORS:!0,backgroundColor:s.colorPicker.value,scale:3,width:c.scrollWidth,height:c.scrollHeight};html2canvas(c,r).then(t=>{c.querySelectorAll(".gutter").forEach(e=>e.style.display="block");const n=y("a");n.download=`${i.currentMode}-collage-${Date.now()}.png`,n.href=t.toDataURL("image/png"),n.click(),v("图片已成功保存！","success")}).catch(t=>{console.error("截图失败:",t),v("截图失败，请重试","error"),c.querySelectorAll(".gutter").forEach(n=>n.style.display="block")})}function b(){w(),i.currentMode==="layout"?(s.layoutWrapper.classList.remove("hidden"),s.stitchingWrapper.classList.add("hidden"),H()):(s.layoutWrapper.classList.add("hidden"),s.stitchingWrapper.classList.remove("hidden"),_())}function H(){const c=s.layoutGrid;c.innerHTML="",Object.assign(c.style,{display:"grid",flexDirection:""});const r=C[i.currentLayoutId];if(!r)return;const[t,n]=r.gr;i.colFractions=Array(n).fill(1),i.rowFractions=Array(t).fill(1),c.style.gridTemplateRows=i.rowFractions.map(a=>`${a}fr`).join(" "),c.style.gridTemplateColumns=i.colFractions.map(a=>`${a}fr`).join(" ");const e=r.c||Array.from({length:t*n},()=>({r:1,c:1})),o={...i.imagesData},l={};e.forEach((a,g)=>{const d=`cell-${g}`,p=z(d);if(p.style.gridRowEnd=`span ${a.r}`,p.style.gridColumnEnd=`span ${a.c}`,a.s&&(p.style.gridRowStart=a.s[0],p.style.gridColumnStart=a.s[1]),c.appendChild(p),o[d]){l[d]=o[d];const u=l[d];E(d,u.src,u.position)}}),i.imagesData=l,setTimeout(I,100)}function _(){const c=s.stitchingGrid;c.innerHTML="",c.className="collage-grid",c.classList.add(i.stitchingDirection),i.stitchingImages.forEach((r,t)=>{const n=y("img");n.src=r,n.dataset.index=t,n.style.borderRadius=`${s.radiusSlider.value}px`,c.appendChild(n)})}function z(c){const r=y("div","grid-cell");r.id=c;const t=y("input");t.type="file",t.accept="image/*",t.id=`input-${c}`,t.multiple=!0,t.onchange=o=>D(o.target.files);const n=y("div","upload-icon-container");n.innerHTML=S.upload;const e=y("div","remove-image-btn");return e.innerHTML=S.remove,e.onclick=o=>{o.stopPropagation(),Y(c)},r.append(n,t,e),r}function I(){const c=s.layoutGrid;if(c.querySelectorAll(".gutter").forEach(o=>o.remove()),i.currentMode!=="layout")return;const r=C[i.currentLayoutId];if(!r)return;const[t,n]=r.gr,e=c.getBoundingClientRect();if(n>1){const o=i.colFractions.map(a=>a/i.colFractions.reduce((g,d)=>g+d,0)*e.width);let l=0;for(let a=0;a<n-1;a++){l+=o[a];const g=y("div","gutter gutter-v");g.style.left=`${l}px`,g.style.height="100%",g.dataset.index=a,c.appendChild(g),k(g,"v")}}if(t>1){const o=i.rowFractions.map(a=>a/i.rowFractions.reduce((g,d)=>g+d,0)*e.height);let l=0;for(let a=0;a<t-1;a++){l+=o[a];const g=y("div","gutter gutter-h");g.style.top=`${l}px`,g.style.width="100%",g.dataset.index=a,c.appendChild(g),k(g,"h")}}}function k(c,r){c.onmousedown=function(t){t.preventDefault();const n=s.layoutGrid,e=parseInt(c.dataset.index),o=n.getBoundingClientRect(),l=function(g){if(r==="v"){const d=i.colFractions[e]+i.colFractions[e+1],p=i.colFractions.slice(0,e).reduce((f,L)=>f+L/i.colFractions.reduce((x,M)=>x+M,0)*o.width,0);let m=(g.clientX-o.left-p)/o.width*i.colFractions.reduce((f,L)=>f+L,0);m<.1&&(m=.1);let h=d-m;h<.1&&(h=.1,m=d-.1),i.colFractions[e]=m,i.colFractions[e+1]=h,n.style.gridTemplateColumns=i.colFractions.map(f=>`${f}fr`).join(" ")}else{const d=i.rowFractions[e]+i.rowFractions[e+1],p=i.rowFractions.slice(0,e).reduce((f,L)=>f+L/i.rowFractions.reduce((x,M)=>x+M,0)*o.height,0);let m=(g.clientY-o.top-p)/o.height*i.rowFractions.reduce((f,L)=>f+L,0);m<.1&&(m=.1);let h=d-m;h<.1&&(h=.1,m=d-.1),i.rowFractions[e]=m,i.rowFractions[e+1]=h,n.style.gridTemplateRows=i.rowFractions.map(f=>`${f}fr`).join(" ")}},a=function(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a),setTimeout(I,50)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",a)}}const V=Object.freeze(Object.defineProperty({__proto__:null,createGutters:I,renderCanvas:b},Symbol.toStringTag,{value:"Module"}));(function(){const c="img.ops-coffee.cn",r=window.location.hostname;r&&r!==c&&r!=="localhost"&&r!=="12.0.0.1"&&(window.location.href=`https://${c}`)})();function N(){s.layoutContainer.innerHTML="";const c={};for(const r in C){const t=C[r];c[t.g]||(c[t.g]=[]),c[t.g].push({id:r,...t})}Object.keys(c).sort((r,t)=>r-t).forEach(r=>{const t=y("h4","layout-group-title");t.textContent=`${r} 张图片`,s.layoutContainer.appendChild(t);const n=y("div","layout-thumbnail-grid");c[r].forEach(e=>{const o=Z(e.id,e);e.id===i.currentLayoutId&&o.classList.add("active"),n.appendChild(o)}),s.layoutContainer.appendChild(n)})}function Z(c,r){const t=y("div","layout-thumbnail");t.dataset.layout=c;const n=y("div","thumbnail-grid");return n.style.gridTemplateColumns=`repeat(${r.gr[1]}, 1fr)`,n.style.gridTemplateRows=`repeat(${r.gr[0]}, 1fr)`,(r.c||Array.from({length:r.gr[0]*r.gr[1]},()=>({r:1,c:1}))).forEach(o=>{const l=y("div","thumbnail-cell");l.style.gridRowEnd=`span ${o.r}`,l.style.gridColumnEnd=`span ${o.c}`,o.s&&(l.style.gridRowStart=o.s[0],l.style.gridColumnStart=o.s[1]),n.appendChild(l)}),t.appendChild(n),t}function K(){s.layoutModeBtn.addEventListener("click",()=>F("layout")),s.stitchingModeBtn.addEventListener("click",()=>{F("stitching");const u=document.getElementById("stitching-placeholder"),m=document.getElementById("stitching-grid");u.classList.toggle("hidden",m.children.length>0)}),s.stitchingUploadBtn.addEventListener("click",()=>s.stitchingUploadInput.click()),s.stitchingUploadInput.addEventListener("change",u=>{D(u.target.files),document.getElementById("stitching-placeholder").classList.add("hidden")}),s.stitchingDirectionBtns.addEventListener("click",u=>{const m=u.target.closest("button");m&&W(m.dataset.direction)}),s.stitchingUploadBtn.addEventListener("dragover",u=>u.preventDefault()),s.stitchingUploadBtn.addEventListener("drop",u=>{u.preventDefault(),D(u.dataTransfer.files),document.getElementById("stitching-placeholder").classList.add("hidden")}),s.layoutContainer.addEventListener("click",u=>{const m=u.target.closest(".layout-thumbnail");m&&(q(m.dataset.layout),document.getElementById("left-sidebar").classList.contains("is-open")&&l())}),s.aspectRatioBtns.addEventListener("click",u=>{const m=u.target.closest("button");m&&U(m)}),s.spacingSlider.addEventListener("input",w),s.radiusSlider.addEventListener("input",w),s.colorPicker.addEventListener("input",w),s.shuffleBtn.addEventListener("click",G),s.downloadBtn.addEventListener("click",j);let c;window.addEventListener("resize",()=>{clearTimeout(c),i.currentMode==="layout"&&(c=setTimeout(()=>{A(async()=>{const{createGutters:u}=await Promise.resolve().then(()=>V);return{createGutters:u}},void 0).then(({createGutters:u})=>{u()})},150))});const r=document.getElementById("toggle-left-sidebar"),t=document.getElementById("toggle-right-sidebar"),n=document.getElementById("left-sidebar"),e=document.getElementById("right-sidebar"),o=document.getElementById("mobile-overlay"),l=()=>{n.classList.remove("is-open"),e.classList.remove("is-open"),o.classList.add("hidden"),document.body.classList.remove("sidebar-open")};r.addEventListener("click",u=>{u.stopPropagation(),n.classList.toggle("is-open")?(e.classList.remove("is-open"),o.classList.remove("hidden"),document.body.classList.add("sidebar-open")):l()}),t.addEventListener("click",u=>{u.stopPropagation(),e.classList.toggle("is-open")?(n.classList.remove("is-open"),o.classList.remove("hidden"),document.body.classList.add("sidebar-open")):l()}),o.addEventListener("click",l),document.getElementById("stitching-placeholder").addEventListener("click",()=>{s.stitchingUploadInput.click()});const g=document.getElementById("app-container"),d=document.getElementById("pc-toggle-left"),p=document.getElementById("pc-toggle-right");d.addEventListener("click",()=>{g.classList.toggle("left-sidebar-collapsed")}),p.addEventListener("click",()=>{g.classList.toggle("right-sidebar-collapsed")})}function J(){const c=document.getElementById("layout-grid");let r={};function t(){r.startCell&&r.startCell.classList.remove("dragging"),r.activeCell&&r.activeCell.classList.remove("is-panning"),r={isMouseDown:!1,isPanning:!1,isDragging:!1,hasMoved:!1,startCell:null,activeCell:null,startX:0,startY:0,startBgPercentX:0,startBgPercentY:0},document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l)}function n(a,g){if(typeof a!="string")return 50;const d=a.trim();if(d.endsWith("%"))return parseFloat(d);if(d.endsWith("px"))return parseFloat(d)/g*100;switch(d){case"top":case"left":return 0;case"bottom":case"right":return 100;case"center":return 50}return 50}c.addEventListener("mousedown",a=>{if(a.button!==0)return;const g=a.target.closest(".grid-cell");!g||a.target.closest(".remove-image-btn")||(t(),r.isMouseDown=!0,r.startCell=g,r.startX=a.clientX,r.startY=a.clientY,document.addEventListener("mousemove",o),document.addEventListener("mouseup",l))});let e=null;function o(a){var g,d;if(r.isMouseDown){if(r.isPanning){const p=r.activeCell.getBoundingClientRect(),u=(a.clientX-r.startX)/p.width*100,m=(a.clientY-r.startY)/p.height*100;let h=r.startBgPercentX-u,f=r.startBgPercentY-m;h=Math.max(0,Math.min(100,h)),f=Math.max(0,Math.min(100,f)),r.activeCell.style.backgroundPosition=`${h}% ${f}%`;return}if(r.isDragging){const p=(g=document.elementFromPoint(a.clientX,a.clientY))==null?void 0:g.closest(".grid-cell");p!==e&&(e&&e.classList.remove("drag-over"),p&&p!==r.startCell&&p.classList.add("drag-over"),e=p);return}if(!r.hasMoved&&(Math.abs(a.clientX-r.startX)>5||Math.abs(a.clientY-r.startY)>5))if(r.hasMoved=!0,a.altKey&&r.startCell.classList.contains("has-image")){r.isPanning=!0,r.activeCell=r.startCell,r.activeCell.classList.add("is-panning");const p=r.activeCell.id,m=(((d=i.imagesData[p])==null?void 0:d.position)||"50% 50%").split(" "),h=r.activeCell.getBoundingClientRect();r.startBgPercentX=n(m[0],h.width),r.startBgPercentY=n(m.length>1?m[1]:m[0],h.height)}else r.startCell.classList.contains("has-image")&&(r.isDragging=!0,r.startCell.classList.add("dragging"))}}function l(a){var g;if(r.isMouseDown){if(r.isPanning){const d=r.activeCell.id;i.imagesData[d]&&(i.imagesData[d].position=r.activeCell.style.backgroundPosition)}else if(r.isDragging){const d=(g=document.elementFromPoint(a.clientX,a.clientY))==null?void 0:g.closest(".grid-cell");d&&d!==r.startCell&&X(r.startCell.id,d.id)}else r.hasMoved||r.startCell.querySelector('input[type="file"]').click();e&&(e.classList.remove("drag-over"),e=null),t()}}}function Q(){N(),K(),J(),s.layoutModeBtn.classList.add("active"),s.stitchingModeBtn.classList.remove("active"),s.layoutControls.classList.remove("hidden"),s.stitchingControls.classList.add("hidden"),s.canvasSettings.classList.remove("hidden");const c=s.aspectRatioBtns.querySelector('[data-ratio="1/1"]');c&&(c.classList.add("active"),s.layoutWrapper.style.aspectRatio="1/1"),b(),console.log("%c 免费在线拼图工具 %c by ops-coffee.cn ","background: #0052cc; color: #fff; padding: 5px; border-radius: 5px 0 0 5px;","background: #f4f5f7; color: #42526e; padding: 5px; border-radius: 0 5px 5px 0;"),console.log("感谢使用！如果您对这个工具有任何建议，欢迎联系我们。微信公众号搜索：运维咖啡吧")}document.addEventListener("DOMContentLoaded",Q);
