import"./modulepreload-polyfill-B5Qt9EMX.js";const Pt="modulepreload",Rt=function(t){return"/"+t},dt={},gt=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),i=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=Promise.allSettled(r.map(o=>{if(o=Rt(o),o in dt)return;dt[o]=!0;const a=o.endsWith(".css"),g=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${g}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Pt,a||(l.as="script"),l.crossOrigin="",l.href=o,i&&l.setAttribute("nonce",i),document.head.appendChild(l),a)return new Promise((m,f)=>{l.addEventListener("load",m),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}function p(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return s.then(d=>{for(const i of d||[])i.status==="rejected"&&p(i.reason);return e().catch(p)})},u={};function Tt(){Object.assign(u,{layoutModeBtn:document.getElementById("layout-mode-btn"),stitchingModeBtn:document.getElementById("stitching-mode-btn"),layoutControls:document.getElementById("layout-controls"),layoutContainer:document.getElementById("layout-container"),stitchingControls:document.getElementById("stitching-controls"),stitchingDirectionBtns:document.getElementById("stitching-direction-btns"),stitchingUploadBtn:document.getElementById("stitching-upload-btn"),stitchingUploadInput:document.getElementById("stitching-upload-input"),layoutWrapper:document.getElementById("layout-wrapper"),layoutGrid:document.getElementById("layout-grid"),stitchingWrapper:document.getElementById("stitching-wrapper"),stitchingGrid:document.getElementById("stitching-grid"),canvasHint:document.getElementById("canvas-hint"),canvasSettings:document.getElementById("canvas-settings"),aspectRatioBtns:document.getElementById("aspect-ratio-btns"),spacingSlider:document.getElementById("spacing-slider"),spacingValue:document.getElementById("spacing-value"),radiusSlider:document.getElementById("radius-slider"),radiusValue:document.getElementById("radius-value"),colorPicker:document.getElementById("color-picker"),shuffleBtn:document.getElementById("shuffle-btn"),downloadBtn:document.getElementById("download-btn"),borderTopInput:document.getElementById("border-top-input"),borderRightInput:document.getElementById("border-right-input"),borderBottomInput:document.getElementById("border-bottom-input"),borderLeftInput:document.getElementById("border-left-input"),toast:document.getElementById("toast")})}function w(t,e){const r=document.createElement(t);return e&&(r.className=e),r}const j={upload:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',remove:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',replace:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></svg>',zoomIn:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',zoomOut:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>',zoomReset:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="4"></circle></svg>'},Q={"2-t1b1":{g:2,gr:[2,1],c:[{r:1,c:1},{r:1,c:1}]},"2-l1r1":{g:2,gr:[1,2],c:[{r:1,c:1},{r:1,c:1}]},"3-t1b2":{g:3,gr:[2,2],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1}]},"3-t2b1":{g:3,gr:[2,2],c:[{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"3-l1r2":{g:3,gr:[2,2],c:[{r:2,c:1},{r:1,c:1},{r:1,c:1}]},"3-l2r1":{g:3,gr:[2,2],c:[{r:1,c:1},{r:2,c:1},{r:1,c:1}]},"3-l1rr":{g:3,gr:[3,3],c:[{r:3,c:2},{r:1,c:1},{r:2,c:1}]},"3-t1bb":{g:3,gr:[3,3],c:[{r:2,c:3},{r:1,c:1},{r:1,c:2}]},"4-grid":{g:4,gr:[2,2]},"4-t1b3":{g:4,gr:[2,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"4-b1t3":{g:4,gr:[2,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3}]},"4-l1r3":{g:4,gr:[3,2],c:[{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"4-l-feat":{g:4,gr:[2,3],c:[{r:2,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1}]},"4-r-feat":{g:4,gr:[2,3],c:[{r:1,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1,s:[2,1]}]},"4-121":{g:4,gr:[3,2],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"4-212":{g:4,gr:[2,3],c:[{r:2,c:1},{r:1,c:1},{r:2,c:1},{r:1,c:1}]},"4-g3x2-alt":{g:4,gr:[3,2],c:[{r:2,c:1},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[1,2]},{r:2,c:1,s:[2,2]}]},"5-center":{g:5,gr:[3,3],c:[{r:1,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:1},{r:1,c:2}]},"5-l3r2":{g:5,gr:[3,3],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1}]},"5-131":{g:5,gr:[3,3],c:[{r:3,c:1},{r:1,c:1},{r:3,c:1},{r:1,c:1},{r:1,c:1}]},"5-l2r3":{g:5,gr:[3,2],c:[{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-t2b3":{g:5,gr:[2,3],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-center-h-bar":{g:5,gr:[3,2],c:[{r:1,c:1},{r:1,c:1,s:[1,2]},{r:1,c:2,s:[2,1]},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[3,2]}]},"5-t2b3-split":{g:5,gr:[2,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"5-l1r4-col":{g:5,gr:[4,2],c:[{r:4,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-t-feat-r":{g:5,gr:[2,3],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-t1b4-grid":{g:5,gr:[3,2],c:[{r:1,c:2},{r:1,c:1,s:[2,1]},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[3,2]}]},"5-r1l4-col":{g:5,gr:[4,2],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:4,c:1,s:[1,2]}]},"5-cross-center":{g:5,gr:[3,3],c:[{r:1,c:3},{r:1,c:1,s:[2,1]},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[2,3]},{r:1,c:3,s:[3,1]},{r:1,c:1,s:[2,2]}]},"5-l-tall-r-split":{g:5,gr:[3,3],c:[{r:3,c:1},{r:1,c:2},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[2,3]},{r:1,c:2,s:[3,2]}]},"5-213":{g:5,gr:[2,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"5-123":{g:5,gr:[2,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3}]},"6-g3x2":{g:6,gr:[3,2]},"6-g2x3":{g:6,gr:[2,3]},"6-center":{g:6,gr:[4,4],c:[{r:1,c:3},{r:2,c:1},{r:3,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:2}]},"6-123":{g:6,gr:[3,6],c:[{r:1,c:6},{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"6-321":{g:6,gr:[3,6],c:[{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:3},{r:1,c:3},{r:1,c:6}]},"6-231":{g:6,gr:[3,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:6}]},"6-222":{g:6,gr:[3,3],c:[{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:2},{r:1,c:1}]},"6-1133":{g:6,gr:[4,3],c:[{r:2,c:3},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:1,c:1},{r:1,c:1}]},"6-223r":{g:6,gr:[3,3],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"6-223l":{g:6,gr:[3,3],c:[{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"6-114":{g:6,gr:[3,5],c:[{r:2,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"6-3333":{g:6,gr:[4,4],c:[{r:2,c:2},{r:2,c:1},{r:2,c:1},{r:2,c:1},{r:2,c:1},{r:2,c:2}]},"7-main":{g:7,gr:[4,4],c:[{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-h-center-band":{g:7,gr:[3,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-w-center-band":{g:7,gr:[3,3],c:[{r:1,c:1},{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-feat-l":{g:7,gr:[4,2],c:[{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-feat-t":{g:7,gr:[4,2],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:1,c:1}]},"7-311":{g:7,gr:[3,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-113":{g:7,gr:[3,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:3}]},"7-232":{g:7,gr:[3,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:3},{r:1,c:3}]},"7-124":{g:7,gr:[3,4],c:[{r:2,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-323":{g:7,gr:[3,4],c:[{r:1,c:1},{r:2,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-313":{g:7,gr:[4,3],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"7-331":{g:7,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:3},{r:1,c:1},{r:1,c:1}]},"7-233":{g:7,gr:[4,6],c:[{r:2,c:3},{r:2,c:3},{r:1,c:2},{r:2,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"7-333":{g:7,gr:[3,3],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"7-346":{g:7,gr:[4,6],c:[{r:1,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:2},{r:2,c:3},{r:1,c:3},{r:1,c:3}]},"8-g4x2":{g:8,gr:[4,2]},"8-g2x4":{g:8,gr:[2,4]},"8-222":{g:8,gr:[4,4],c:[{r:1,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:2},{r:1,c:2}]},"8-l2-tall-r6-grid":{g:8,gr:[3,4],c:[{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"8-sandwich-6":{g:8,gr:[4,3],c:[{r:1,c:3},{r:1,c:1,s:[2,1]},{r:1,c:1,s:[2,2]},{r:1,c:1,s:[2,3]},{r:1,c:1,s:[3,1]},{r:1,c:1,s:[3,2]},{r:1,c:1,s:[3,3]},{r:1,c:3,s:[4,1]}]},"8-313":{g:8,gr:[5,4],c:[{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:2,c:2}]},"8-131":{g:8,gr:[4,5],c:[{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:1,c:1}]},"8-134":{g:8,gr:[4,4],c:[{r:3,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"8-431":{g:8,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:3},{r:1,c:1},{r:1,c:1}]},"8-323":{g:8,gr:[3,6],c:[{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"8-363":{g:8,gr:[6,3],c:[{r:2,c:1},{r:3,c:1},{r:2,c:1},{r:2,c:1},{r:2,c:1},{r:3,c:1},{r:2,c:1},{r:2,c:1}]},"8-344":{g:8,gr:[4,4],c:[{r:1,c:1},{r:2,c:1},{r:2,c:2},{r:1,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1}]},"9-grid":{g:9,gr:[3,3]},"9-144-grid":{g:9,gr:[3,4],c:[{r:1,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-414-grid":{g:9,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-441-grid":{g:9,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:4}]},"9-211-grid":{g:9,gr:[3,4],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-112-grid":{g:9,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1}]},"9-434-grid":{g:9,gr:[4,4],c:[{r:1,c:1},{r:4,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-344-grid":{g:9,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-424-grid":{g:9,gr:[4,4],c:[{r:2,c:2},{r:2,c:1},{r:2,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1}]},"9-116-grid":{g:9,gr:[6,6],c:[{r:3,c:3},{r:3,c:3},{r:3,c:3},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"9-611-grid":{g:9,gr:[6,6],c:[{r:2,c:2},{r:1,c:1},{r:3,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:3,c:3},{r:3,c:3}]},"9-cen-grid":{g:9,gr:[4,4],c:[{r:1,c:2},{r:1,c:2},{r:2,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-g5x2":{g:10,gr:[5,2]},"10-t2b8-grid":{g:10,gr:[3,4],c:[{r:1,c:2},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-424-grid":{g:10,gr:[3,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-4x3-grid":{g:10,gr:[4,3],c:[{r:1,c:3},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-5x5-grid":{g:10,gr:[5,5],c:[{r:4,c:4},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-4x4-grid":{g:10,gr:[4,4],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1}]},"10-8x8-grid":{g:10,gr:[8,8],c:[{r:4,c:4},{r:4,c:4},{r:4,c:4},{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-442-grid":{g:10,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"10-6x6-grid":{g:10,gr:[6,6],c:[{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:2,c:2},{r:1,c:2},{r:2,c:2},{r:1,c:2},{r:2,c:2},{r:2,c:2},{r:2,c:2}]},"11-4c4-t":{g:11,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:2,c:2},{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"11-4x4-t":{g:11,gr:[4,4],c:[{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1}]},"11-4x6-t":{g:11,gr:[4,6],c:[{r:1,c:3},{r:1,c:3},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2},{r:1,c:2}]},"11-feat-t":{g:11,gr:[3,5],c:[{r:1,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"11-feat-c":{g:11,gr:[3,5],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"11-feat-f":{g:11,gr:[3,5],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:5}]},"12-g4x3":{g:12,gr:[4,3]},"12-g3x4":{g:12,gr:[3,4]},"12-g6x6":{g:12,gr:[6,6],c:[{r:5,c:5},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"13-feat-c":{g:13,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"13-211":{g:13,gr:[4,4],c:[{r:2,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"13-112":{g:13,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:2},{r:1,c:1},{r:1,c:1}]},"14-g7x2":{g:14,gr:[7,2]},"14-g4x4r":{g:14,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"14-g4x4c":{g:14,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:2,c:1},{r:2,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"15-g5x3":{g:15,gr:[5,3]},"15-g4x4c":{g:15,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1}]},"15-g4x4f":{g:15,gr:[4,4],c:[{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:1},{r:1,c:2}]},"16-g4x4":{g:16,gr:[4,4]}},ut="2-t1b1",c={currentMode:"layout",shared:{spacing:10,radius:8,bgColor:"#FFFFFF",backgroundImage:null,borderWidths:{top:0,right:0,bottom:0,left:0},selectedTextId:null,selectedArrowId:null,selectedRectangleId:null,selectedEllipseId:null},layout:{activeCellId:null,currentLayoutId:ut,layoutDef:Q[ut],imagesData:{},texts:[],arrows:[],rectangles:[],ellipses:[],colFractions:[],rowFractions:[]},stitching:{direction:"horizontal",images:[],texts:[],arrows:[],rectangles:[],ellipses:[]}};function Ft(t){c.layout.currentLayoutId=t,c.layout.layoutDef=Q[t]}function mt(t,e){if(!e)return;const r=w("div","text-element-container");r.id=`text-container-${t.id}`,Object.assign(r.style,{top:`${t.top}%`,left:`${t.left}%`});const n=w("div","text-content");n.innerText=t.content,n.contentEditable="true",Object.assign(n.style,{color:t.color,fontSize:`${t.fontSize}px`});const s=w("div","text-toolbar");s.innerHTML=`
        <input type="number" value="${t.fontSize}" data-property="fontSize" title="Font Size">
        <input type="color" value="${t.color}" data-property="color" title="Font Color">
    `;const p=w("button","delete-text-button");p.innerHTML="&times;",p.title="Delete Text",r.append(s,n,p),e.appendChild(r),r.addEventListener("click",d=>{d.stopPropagation(),F(t.id)}),s.addEventListener("mousedown",d=>d.stopPropagation()),s.addEventListener("input",d=>{const i=d.target.dataset.property;i&&ot({[i]:d.target.value})}),p.addEventListener("click",d=>{d.stopPropagation(),Et()}),n.addEventListener("blur",()=>{ot({content:n.innerText})}),r.addEventListener("mousedown",d=>{if(d.target.closest(".text-toolbar"))return;d.stopPropagation(),F(t.id);const i=e.getBoundingClientRect(),o=d.clientX,a=d.clientY,g=r.offsetLeft,l=r.offsetTop;function m(h){const v=h.clientX-o,x=h.clientY-a;r.style.left=`${(g+v)/i.width*100}%`,r.style.top=`${(l+x)/i.height*100}%`}function f(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f),ot({left:parseFloat(r.style.left),top:parseFloat(r.style.top)})}document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)})}function ft(t,e){if(!e)return;const r=e.getBoundingClientRect(),n=r.width*(t.x1/100),s=r.height*(t.y1/100),p=r.width*(t.x2/100),d=r.height*(t.y2/100),i=Math.min(n,p),o=Math.min(s,d),a=Math.abs(n-p),g=Math.abs(s-d),l=w("div","arrow-container");l.id=`arrow-container-${t.id}`,c.shared.selectedArrowId===t.id&&l.classList.add("selected"),Object.assign(l.style,{left:`${i}px`,top:`${o}px`,width:`${a}px`,height:`${g}px`,transform:`rotate(${t.rotation||0}deg)`});const m="http://www.w3.org/2000/svg",f=document.createElementNS(m,"svg"),h=`arrowhead-${t.id}`,v=document.createElementNS(m,"line"),x=document.createElementNS(m,"polygon");f.innerHTML=`<defs><marker id="${h}" markerWidth="2.5" markerHeight="2.5" refX="2.5" refY="1.25" orient="auto" markerUnits="strokeWidth"></marker></defs>`,x.setAttribute("points","0 0, 2.5 1.25, 0 2.5"),x.setAttribute("fill",t.color),f.querySelector("marker").appendChild(x);const C=n-i,X=s-o,O=p-i,q=d-o;v.setAttribute("x1",C),v.setAttribute("y1",X),v.setAttribute("x2",O),v.setAttribute("y2",q),v.setAttribute("stroke",t.color),v.setAttribute("stroke-width",t.strokeWidth),v.setAttribute("marker-end",`url(#${h})`),f.appendChild(v);const D=w("div","arrow-handle start"),P=w("div","arrow-handle end");D.style.left=`${C}px`,D.style.top=`${X}px`,P.style.left=`${O}px`,P.style.top=`${q}px`;const H=w("div","rotation-handle"),R=w("div","text-toolbar");R.style.top="-45px",R.innerHTML=`<input type="number" value="${t.strokeWidth}" data-property="strokeWidth" title="Thickness" min="1" max="50"><input type="color" value="${t.color}" data-property="color" title="Color"><button class="toolbar-delete-btn" title="Delete Arrow">&times;</button>`,l.append(f,D,P,H,R),e.appendChild(l);function _(b){b.element&&b.element.addEventListener("mousedown",y=>{y.stopPropagation(),b.action&&b.action();const E={x:y.clientX,y:y.clientY,initialState:{...t},gridRect:e.getBoundingClientRect(),elementRect:l.getBoundingClientRect()};function L(W){b.onMove(W,E)}function B(W){document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",B),b.onUp&&b.onUp(W,E)}document.addEventListener("mousemove",L),document.addEventListener("mouseup",B)})}_({element:l,action:()=>M(t.id),onMove:(b,y)=>{const E=b.clientX-y.x,L=b.clientY-y.y;l.style.left=`${y.elementRect.left-y.gridRect.left+E}px`,l.style.top=`${y.elementRect.top-y.gridRect.top+L}px`},onUp:(b,y)=>{const E=(b.clientX-y.x)/y.gridRect.width*100,L=(b.clientY-y.y)/y.gridRect.height*100;K({x1:y.initialState.x1+E,y1:y.initialState.y1+L,x2:y.initialState.x2+E,y2:y.initialState.y2+L})}});const z=(b,y)=>{_({element:b,action:()=>M(t.id),onMove:(E,L)=>{var B;K({[y.x]:(E.clientX-L.gridRect.left)/L.gridRect.width*100,[y.y]:(E.clientY-L.gridRect.top)/L.gridRect.height*100}),(B=S())==null||B.render()}})};z(D,{x:"x1",y:"y1"}),z(P,{x:"x2",y:"y2"}),_({element:H,action:()=>M(t.id),onMove:(b,y)=>{const E=y.elementRect,L=E.left+E.width/2,B=E.top+E.height/2,W=Math.atan2(b.clientY-B,b.clientX-L)*(180/Math.PI),nt=Math.atan2(y.y-B,y.x-L)*(180/Math.PI);l.style.transform=`rotate(${y.initialState.rotation+(W-nt)}deg)`},onUp:(b,y)=>{const E=y.elementRect,L=E.left+E.width/2,B=E.top+E.height/2,W=Math.atan2(b.clientY-B,b.clientX-L)*(180/Math.PI),nt=Math.atan2(y.y-B,y.x-L)*(180/Math.PI);K({rotation:y.initialState.rotation+(W-nt)})}}),R.addEventListener("input",b=>{var y;b.stopPropagation(),K({[b.target.dataset.property]:b.target.value}),(y=S())==null||y.render()}),R.querySelector(".toolbar-delete-btn").addEventListener("click",b=>{b.stopPropagation(),Lt()})}function tt(t,e){if(!e)return;const r=e.getBoundingClientRect(),n=w("div","shape-container");n.id=`shape-container-${t.id}`,Object.assign(n.style,{left:`${t.left}%`,top:`${t.top}%`,width:`${t.width}%`,height:`${t.height}%`});const s=w("div","shape-element");s.style.border=`${t.strokeWidth}px solid ${t.color}`,t.type==="ellipse"&&(s.style.borderRadius="50%");const p=w("div","shape-toolbar");p.innerHTML=`
        <input type="number" value="${t.strokeWidth}" data-property="strokeWidth" title="线条粗细" min="1" max="50">
        <input type="color" value="${t.color}" data-property="color" title="线条颜色">
        <button class="toolbar-delete-btn" title="删除形状">&times;</button>
    `;const d=["n","ne","e","se","s","sw","w","nw"].map(g=>{const l=w("div",`resize-handle ${g}`);return l.dataset.direction=g,l});n.append(s,p,...d),e.appendChild(n),(c.shared.selectedRectangleId===t.id||c.shared.selectedEllipseId===t.id)&&n.classList.add("selected");const i=t.type==="rectangle"?N:G,o=t.type==="rectangle"?ee:ce,a=t.type==="rectangle"?xt:St;n.addEventListener("mousedown",g=>{g.stopPropagation(),i(t.id)}),p.addEventListener("mousedown",g=>g.stopPropagation()),p.addEventListener("input",g=>{g.stopPropagation();const{property:l}=g.target.dataset,m=g.target.type==="number"?parseFloat(g.target.value):g.target.value;o({[l]:m}),s.style.borderColor=t.color,s.style.borderWidth=`${t.strokeWidth}px`}),p.querySelector(".toolbar-delete-btn").addEventListener("click",g=>{g.stopPropagation(),a()}),s.addEventListener("mousedown",g=>{g.stopPropagation(),i(t.id);const l=g.clientX,m=g.clientY,f=t.left,h=t.top;function v(C){const X=(C.clientX-l)/r.width*100,O=(C.clientY-m)/r.height*100;n.style.left=`${f+X}%`,n.style.top=`${h+O}%`}function x(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x),o({left:parseFloat(n.style.left),top:parseFloat(n.style.top)})}document.addEventListener("mousemove",v),document.addEventListener("mouseup",x)}),d.forEach(g=>{g.addEventListener("mousedown",l=>{l.stopPropagation(),i(t.id);const m=l.target.dataset.direction,f=l.clientX,h=l.clientY,v=t.left,x=t.top,C=t.width,X=t.height;function O(D){const P=(D.clientX-f)/r.width*100,H=(D.clientY-h)/r.height*100;let R=v,_=x,z=C,b=X;m.includes("e")&&(z+=P),m.includes("w")&&(z-=P,R+=P),m.includes("s")&&(b+=H),m.includes("n")&&(b-=H,_+=H),z>1&&b>1&&(n.style.left=`${R}%`,n.style.top=`${_}%`,n.style.width=`${z}%`,n.style.height=`${b}%`)}function q(){document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",q),o({left:parseFloat(n.style.left),top:parseFloat(n.style.top),width:parseFloat(n.style.width),height:parseFloat(n.style.height)})}document.addEventListener("mousemove",O),document.addEventListener("mouseup",q)})})}let et=!1,Y=null,it=-1;function At(){u.stitchingControls.classList.remove("hidden"),u.stitchingWrapper.classList.remove("hidden"),document.getElementById("stitching-placeholder").classList.toggle("hidden",c.stitching.images.length>0),Yt()}function Ot(){u.stitchingControls.classList.add("hidden"),u.stitchingWrapper.classList.add("hidden"),u.stitchingGrid.removeEventListener("mousedown",vt)}function Z(){const t=u.stitchingGrid;t.innerHTML="",t.className="collage-grid",t.classList.add(c.stitching.direction),t.style.position="relative",c.stitching.images.length>1&&t.classList.add("is-sortable"),c.stitching.images.forEach((n,s)=>{const p=w("img");p.src=n,p.dataset.index=s,t.appendChild(p)});const e=u.stitchingGrid,r=c.stitching;r.texts.forEach(n=>mt(n,e)),r.arrows.forEach(n=>ft(n,e)),r.rectangles.forEach(n=>tt(n,e)),r.ellipses.forEach(n=>tt(n,e)),ht()}function Dt(t){const e=Array.from(t).filter(n=>n.type.startsWith("image/"));if(e.length===0){I("未选择有效的图片文件","error");return}document.getElementById("stitching-placeholder").classList.add("hidden");const r=e.map(n=>new Promise(s=>{const p=new FileReader;p.onload=d=>s(d.target.result),p.readAsDataURL(n)}));Promise.all(r).then(n=>{c.stitching.images=c.stitching.images.concat(n),I(`成功添加 ${n.length} 张图片`,"success"),Z(),U()})}function zt(){if(!(c.stitching.images.length<2)){for(let t=c.stitching.images.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[c.stitching.images[t],c.stitching.images[e]]=[c.stitching.images[e],c.stitching.images[t]]}Z(),I("图片已随机排序","info")}}function ht(){const{spacing:t,radius:e}=c.shared;u.stitchingWrapper.style.padding=`${t}px`;const r=u.stitchingGrid;r.style.gap=`${t}px`,r.querySelectorAll("img").forEach(n=>{n.style.borderRadius=`${e}px`})}function Wt(){const t=u.stitchingWrapper,e=u.stitchingGrid,r=document.createElement("div"),n=e.cloneNode(!0),s=window.getComputedStyle(t);Object.assign(r.style,{padding:s.padding,backgroundColor:s.backgroundColor,backgroundImage:s.backgroundImage,backgroundSize:s.backgroundSize,backgroundPosition:s.backgroundPosition,boxSizing:"border-box",position:"absolute",top:"-9999px",left:"-9999px"}),n.style.gap=window.getComputedStyle(e).gap,r.appendChild(n),document.body.appendChild(r);const p=()=>{document.body.removeChild(r)};return{element:r,options:{useCORS:!0,backgroundColor:null,scale:3,width:r.offsetWidth,height:r.offsetHeight},cleanup:p}}function yt(t){t!==c.stitching.direction&&(c.stitching.direction=t,document.querySelector("#stitching-direction-btns .active").classList.remove("active"),document.querySelector(`#stitching-direction-btns [data-direction="${t}"]`).classList.add("active"),Z())}function Yt(){u.stitchingGrid.addEventListener("mousedown",vt)}function vt(t){t.target.tagName!=="IMG"||c.stitching.images.length<2||(t.preventDefault(),et=!0,Y=t.target,it=parseInt(Y.dataset.index),Y.classList.add("dragging"),document.addEventListener("mousemove",bt),document.addEventListener("mouseup",wt))}function bt(t){if(!et)return;const e=document.elementFromPoint(t.clientX,t.clientY),r=u.stitchingGrid;r.querySelectorAll("img.drag-over").forEach(n=>n.classList.remove("drag-over")),e&&e.tagName==="IMG"&&e!==Y&&e.parentElement===r&&e.classList.add("drag-over")}function wt(t){if(!et)return;const e=u.stitchingGrid;Y.classList.remove("dragging"),e.querySelectorAll("img.drag-over").forEach(n=>n.classList.remove("drag-over"));const r=document.elementFromPoint(t.clientX,t.clientY);if(r&&r.tagName==="IMG"&&r!==Y&&r.parentElement===e){const n=parseInt(r.dataset.index);Xt(it,n)}et=!1,Y=null,it=-1,document.removeEventListener("mousemove",bt),document.removeEventListener("mouseup",wt)}function Xt(t,e){const[r]=c.stitching.images.splice(t,1);c.stitching.images.splice(e,0,r),Z()}const Ht=Object.freeze(Object.defineProperty({__proto__:null,activate:At,applySharedStyles:ht,deactivate:Ot,getDownloadOptions:Wt,processFiles:Dt,render:Z,setDirection:yt,shuffle:zt},Symbol.toStringTag,{value:"Module"}));function k(){return c.currentMode==="layout"?c.layout:c.stitching}function _t(){var t;(t=S())==null||t.shuffle()}function jt(){V(null),F(null),M(null),N(null),G(null);const t=S();if(!t)return;u.layoutGrid.querySelectorAll(".gutter").forEach(s=>s.style.display="none"),I("正在生成高清晰度图片...","info");const{element:e,options:r,cleanup:n}=t.getDownloadOptions();html2canvas(e,r).then(s=>{n&&n(),u.layoutGrid.querySelectorAll(".gutter").forEach(d=>d.style.display="block");const p=document.createElement("a");p.download=`${c.currentMode}-collage-${Date.now()}.png`,p.href=s.toDataURL("image/png"),p.click(),I("图片已成功保存！","success")}).catch(s=>{n&&n(),u.layoutGrid.querySelectorAll(".gutter").forEach(p=>p.style.display="block"),console.error("截图失败:",s),I("截图失败，请重试","error")})}function Nt(t){c.currentMode==="layout"&&$t(t)}function Gt(t){var e;c.currentMode==="layout"&&((e=u.aspectRatioBtns.querySelector(".active"))==null||e.classList.remove("active"),t.classList.add("active"),at(),setTimeout(()=>{var r;return(r=S())==null?void 0:r.render()},100))}function Ut(t){c.currentMode==="stitching"&&yt(t)}function qt(t){const e=S();e&&e.processFiles&&e.processFiles(t)}function Vt(t){const e=new FileReader;e.onload=r=>{c.shared.backgroundImage=r.target.result,$()},e.readAsDataURL(t)}function Zt(){c.shared.backgroundImage=null,$()}function Kt(){var r;const t=k(),e={id:Date.now(),content:"文字",color:"#ff0000",fontSize:37,top:50,left:50};t.texts.push(e),(r=S())==null||r.render(),F(e.id)}function F(t){var r;if(c.shared.selectedTextId===t)return;const e=c.shared.selectedTextId;if(c.shared.selectedTextId=t,e&&((r=document.getElementById(`text-container-${e}`))==null||r.classList.remove("selected")),t){const n=document.getElementById(`text-container-${t}`);if(n){n.classList.add("selected");const s=n.querySelector(".text-content");Jt(s)}}}function ot(t){if(!c.shared.selectedTextId)return;const e=k().texts.find(s=>s.id===c.shared.selectedTextId);if(!e)return;Object.assign(e,t);const r=document.getElementById(`text-container-${e.id}`);if(!r)return;const n=r.querySelector(".text-content");n&&(t.content&&(n.innerText=t.content),t.fontSize&&(n.style.fontSize=`${t.fontSize}px`),t.color&&(n.style.color=t.color),t.top&&(n.style.top=`${t.top}%`),t.left&&(n.style.left=`${t.left}%`))}function Et(){var r;if(!c.shared.selectedTextId)return;const t=k(),e=t.texts.findIndex(n=>n.id===c.shared.selectedTextId);e>-1&&(t.texts.splice(e,1),(r=document.getElementById(`text-container-${c.shared.selectedTextId}`))==null||r.remove(),F(null))}function Jt(t){if(t&&(t.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u")){const e=document.createRange();e.selectNodeContents(t),e.collapse(!1);const r=window.getSelection();r.removeAllRanges(),r.addRange(e)}}function Qt(){var r;const t=k(),e={id:Date.now(),color:"#ff0000",strokeWidth:4,rotation:0,x1:25,y1:25,x2:35,y2:35};t.arrows.push(e),(r=S())==null||r.render(),M(e.id)}function M(t){var r,n;if(c.shared.selectedArrowId===t&&t!==null)return;const e=c.shared.selectedArrowId;c.shared.selectedArrowId=t,e&&((r=document.getElementById(`arrow-container-${e}`))==null||r.classList.remove("selected")),t&&((n=document.getElementById(`arrow-container-${t}`))==null||n.classList.add("selected"))}function K(t){if(!c.shared.selectedArrowId)return;const e=k().arrows.find(r=>r.id===c.shared.selectedArrowId);e&&Object.assign(e,t)}function Lt(){var r;if(!c.shared.selectedArrowId)return;const t=k(),e=t.arrows.findIndex(n=>n.id===c.shared.selectedArrowId);e>-1&&(t.arrows.splice(e,1),(r=S())==null||r.render(),M(null))}function te(){var r;const t=k(),e={id:Date.now(),type:"rectangle",color:"#ff0000",strokeWidth:4,left:25,top:25,width:15,height:10,rotation:0};t.rectangles.push(e),(r=S())==null||r.render(),N(e.id)}function N(t){var r,n;if(c.shared.selectedRectangleId===t)return;F(null),M(null),G(null);const e=c.shared.selectedRectangleId;c.shared.selectedRectangleId=t,e&&((r=document.getElementById(`shape-container-${e}`))==null||r.classList.remove("selected")),t&&((n=document.getElementById(`shape-container-${t}`))==null||n.classList.add("selected"))}function ee(t){if(!c.shared.selectedRectangleId)return;const e=k().rectangles.find(r=>r.id===c.shared.selectedRectangleId);e&&Object.assign(e,t)}function xt(){var r;if(!c.shared.selectedRectangleId)return;const t=k(),e=t.rectangles.findIndex(n=>n.id===c.shared.selectedRectangleId);e>-1&&(t.rectangles.splice(e,1),(r=S())==null||r.render(),N(null))}function re(){var r;const t=k(),e={id:Date.now(),type:"ellipse",color:"#ff0000",strokeWidth:4,left:25,top:25,width:15,height:15,rotation:0};t.ellipses.push(e),(r=S())==null||r.render(),G(e.id)}function G(t){var r,n;if(c.shared.selectedEllipseId===t)return;F(null),M(null),N(null);const e=c.shared.selectedEllipseId;c.shared.selectedEllipseId=t,e&&((r=document.getElementById(`shape-container-${e}`))==null||r.classList.remove("selected")),t&&((n=document.getElementById(`shape-container-${t}`))==null||n.classList.add("selected"))}function ce(t){if(!c.shared.selectedEllipseId)return;const e=k().ellipses.find(r=>r.id===c.shared.selectedEllipseId);e&&Object.assign(e,t)}function St(){var r;if(!c.shared.selectedEllipseId)return;const t=k(),e=t.ellipses.findIndex(n=>n.id===c.shared.selectedEllipseId);e>-1&&(t.ellipses.splice(e,1),(r=S())==null||r.render(),G(null))}function V(t){if(c.currentMode==="layout"&&c.layout.activeCellId!==t){if(c.layout.activeCellId){const e=document.getElementById(c.layout.activeCellId);e&&e.classList.remove("selected")}if(c.layout.activeCellId=t,t){const e=document.getElementById(t);e&&e.classList.add("selected")}}}function ne(t){if(typeof t!="string"||t.trim()==="")return[50,50];const e=t.split(" "),r=parseFloat(e[0]),n=e.length>1?parseFloat(e[1]):r;return[isNaN(r)?50:r,isNaN(n)?50:n]}function oe(t,e){if(c.currentMode!=="layout")return;const{activeCellId:r}=c.layout;if(!r)return;const n=c.layout.imagesData[r];if(!n||!n.src)return;const s=document.getElementById(r);if(!s)return;const[p,d]=ne(n.position);let i=p-t,o=d-e;i=Math.max(0,Math.min(100,i)),o=Math.max(0,Math.min(100,o));const a=`${i}% ${o}%`;n.position=a,s.style.backgroundPosition=a}function rt(t){if(c.currentMode!=="layout")return;const{activeCellId:e}=c.layout;if(!e)return;const r=c.layout.imagesData[e];if(!r||!r.src)return;const n=Math.max(1,Math.min(t,5));r.scale=n,A(e,r)}const It=.2;function ie(){if(c.currentMode!=="layout")return;const{activeCellId:t}=c.layout;if(!t||!c.layout.imagesData[t])return;const r=(c.layout.imagesData[t].scale||1)+It;rt(r)}function se(){if(c.currentMode!=="layout")return;const{activeCellId:t}=c.layout;if(!t||!c.layout.imagesData[t])return;const r=(c.layout.imagesData[t].scale||1)-It;rt(r)}function le(t){if(c.currentMode!=="layout")return;const e=c.layout.imagesData[t];e&&(e.scale=1,e.position="50% 50%",A(t,e))}function lt(){const t=u.layoutGrid;t.querySelectorAll(".gutter").forEach(d=>d.remove());const[e,r]=c.layout.layoutDef.gr,n=t.getBoundingClientRect(),s=c.layout.rowFractions.reduce((d,i)=>d+i,0),p=c.layout.colFractions.reduce((d,i)=>d+i,0);if(r>1){const d=c.layout.colFractions.map(o=>o/p*n.width);let i=0;for(let o=0;o<r-1;o++){i+=d[o];const a=w("div","gutter gutter-v");a.style.left=`${i}px`,a.style.height="100%",a.dataset.index=o,t.appendChild(a),pt(a,"v")}}if(e>1){const d=c.layout.rowFractions.map(o=>o/s*n.height);let i=0;for(let o=0;o<e-1;o++){i+=d[o];const a=w("div","gutter gutter-h");a.style.top=`${i}px`,a.style.width="100%",a.dataset.index=o,t.appendChild(a),pt(a,"h")}}}function pt(t,e){t.onmousedown=function(r){r.preventDefault();const n=u.layoutGrid,s=parseInt(t.dataset.index),p=n.getBoundingClientRect(),d=function(o){if(e==="v"){const a=c.layout.colFractions[s]+c.layout.colFractions[s+1],g=c.layout.colFractions.slice(0,s).reduce((h,v)=>h+v/c.layout.colFractions.reduce((x,C)=>x+C,0)*p.width,0);let m=(o.clientX-p.left-g)/p.width*c.layout.colFractions.reduce((h,v)=>h+v,0);m<.1&&(m=.1);let f=a-m;f<.1&&(f=.1,m=a-.1),c.layout.colFractions[s]=m,c.layout.colFractions[s+1]=f,n.style.gridTemplateColumns=c.layout.colFractions.map(h=>`${h}fr`).join(" ")}else{const a=c.layout.rowFractions[s]+c.layout.rowFractions[s+1],g=c.layout.rowFractions.slice(0,s).reduce((h,v)=>h+v/c.layout.rowFractions.reduce((x,C)=>x+C,0)*p.height,0);let m=(o.clientY-p.top-g)/p.height*c.layout.rowFractions.reduce((h,v)=>h+v,0);m<.1&&(m=.1);let f=a-m;f<.1&&(f=.1,m=a-.1),c.layout.rowFractions[s]=m,c.layout.rowFractions[s+1]=f,n.style.gridTemplateRows=c.layout.rowFractions.map(h=>`${h}fr`).join(" ")}},i=function(){document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",i),setTimeout(lt,50)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",i)}}const ae=Object.freeze(Object.defineProperty({__proto__:null,createGutters:lt},Symbol.toStringTag,{value:"Module"}));function de(){u.layoutControls.classList.remove("hidden"),u.canvasSettings.classList.remove("hidden"),u.layoutWrapper.classList.remove("hidden"),u.canvasHint.classList.remove("hidden")}function ge(){u.layoutControls.classList.add("hidden"),u.canvasSettings.classList.add("hidden"),u.layoutWrapper.classList.add("hidden"),u.canvasHint.classList.add("hidden")}function kt(){const t=u.layoutGrid;t.innerHTML="";const e=c.layout.layoutDef;if(!e)return;const[r,n]=e.gr;c.layout.rowFractions=Array(r).fill(1),c.layout.colFractions=Array(n).fill(1),t.style.gridTemplateRows=c.layout.rowFractions.map(o=>`${o}fr`).join(" "),t.style.gridTemplateColumns=c.layout.colFractions.map(o=>`${o}fr`).join(" ");const s=e.c||Array.from({length:r*n},()=>({r:1,c:1})),p={...c.layout.imagesData},d={};s.forEach((o,a)=>{const g=`cell-${a}`,l=fe(g);if(l.style.gridRowEnd=`span ${o.r}`,l.style.gridColumnEnd=`span ${o.c}`,o.s&&(l.style.gridRowStart=o.s[0],l.style.gridColumnStart=o.s[1]),t.appendChild(l),p[g]){d[g]=p[g];const m=d[g];A(g,m)}}),c.layout.imagesData=d;const i=u.layoutGrid;c.layout.texts.forEach(o=>mt(o,i)),c.layout.arrows.forEach(o=>ft(o,i)),c.layout.rectangles.forEach(o=>tt(o,i)),c.layout.ellipses.forEach(o=>tt(o,i)),Bt(),setTimeout(lt,100)}function Ct(t,e=null){var i;const r=Array.from(t).filter(o=>o.type.startsWith("image/"));if(r.length===0){I("未选择有效的图片文件","error");return}const n=(o,a)=>{const g=new FileReader;g.onload=l=>{const m=l.target.result,f=new Image;f.onload=()=>{const h={src:m,position:"50% 50%",scale:1,width:f.naturalWidth,height:f.naturalHeight};c.layout.imagesData[a]=h,A(a,h)},f.src=m},g.readAsDataURL(o)},s=[];e&&s.push(e),Array.from(document.querySelectorAll("#layout-grid .grid-cell")).map(o=>o.id).forEach(o=>{o!==e&&(!c.layout.imagesData[o]||!c.layout.imagesData[o].src)&&s.push(o)});const d=e&&((i=c.layout.imagesData[e])==null?void 0:i.src);if(s.length>0){const o=Math.min(r.length,s.length);I(`正在上传 ${o} 张图片...`,"info");let a=0;for(let g=0;g<o;g++)n(r[g],s[g]),a++;setTimeout(()=>{const g=`成功上传 ${a} 张图片。`+(r.length>a?` 已忽略 ${r.length-a} 张。`:"");I(g,"success"),U()},500)}else d?(I("画布已满，将替换当前图片。","info"),n(r[0],e)):I("没有空的格子可以放置图片","error")}function ue(){const t=Object.entries(c.layout.imagesData);if(t.length<2)return;const e=t.map(r=>r[1]);for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}t.forEach(([r],n)=>{c.layout.imagesData[r]=e[n],A(r,e[n].src,e[n].position)}),I("图片已随机排序","info")}function Bt(){const{spacing:t,radius:e}=c.shared,r=u.layoutGrid;r.style.padding=`${t}px`,r.style.gap=`${t}px`,r.querySelectorAll(".grid-cell").forEach(n=>{n.style.borderRadius=`${e}px`})}function pe(){return u.layoutGrid,{element:u.layoutWrapper,options:{useCORS:!0,backgroundColor:null,scale:3}}}function $t(t){var e,r;t!==c.layout.currentLayoutId&&((e=u.layoutContainer.querySelector(".active"))==null||e.classList.remove("active"),(r=u.layoutContainer.querySelector(`[data-layout="${t}"]`))==null||r.classList.add("active"),Ft(t),kt())}function me(t){delete c.layout.imagesData[t],ct(t),U()}function Mt(t,e){if(!e)return;const r=c.layout.imagesData[t]?{...c.layout.imagesData[t]}:null,n=c.layout.imagesData[e]?{...c.layout.imagesData[e]}:null;r&&(r.position="50% 50%",r.scale=1),n&&(n.position="50% 50%",n.scale=1),c.layout.imagesData[t]=n,n?A(t,n):(delete c.layout.imagesData[t],ct(t)),c.layout.imagesData[e]=r,r?A(e,r):(delete c.layout.imagesData[e],ct(e))}function fe(t){const e=w("div","grid-cell");e.id=t;const r=w("input");r.type="file",r.accept="image/*",r.id=`input-${t}`,r.multiple=!0,r.className="hidden-file-input",r.onchange=l=>{Ct(l.target.files,t)};const n=w("div","upload-icon-container");n.innerHTML=j.upload;const s=w("div","cell-button-container"),p=w("div","cell-icon-btn zoom-in-btn");p.innerHTML=j.zoomIn,p.title="放大";const d=w("div","cell-icon-btn zoom-out-btn");d.innerHTML=j.zoomOut,d.title="缩小";const i=w("div","cell-icon-btn reset-btn");i.innerHTML=j.zoomReset,i.title="还原";const o=w("div","cell-icon-btn replace-btn");o.innerHTML=j.replace,o.title="替换图片";const a=w("div","cell-icon-btn remove-btn");a.innerHTML=j.remove,a.title="删除图片",p.onclick=l=>{l.stopPropagation(),V(t),ie()},d.onclick=l=>{l.stopPropagation(),V(t),se()},i.onclick=l=>{l.stopPropagation(),le(t)},o.onclick=l=>{l.stopPropagation(),r.click()},a.onclick=l=>{l.stopPropagation(),(void 0)(t)},s.append(p,d,i,o,a),e.append(n,r,s),e.addEventListener("wheel",l=>{var x;if(e.id!==c.layout.activeCellId||!e.classList.contains("has-image"))return;l.preventDefault(),l.stopPropagation();const m=((x=c.layout.imagesData[e.id])==null?void 0:x.scale)||1,f=.1,h=l.deltaY<0?1:-1,v=m+h*f;rt(v)},{passive:!1});const g={isPinching:!1,initialDistance:0,initialScale:1};return e.addEventListener("touchstart",l=>{var m;l.touches.length===2&&e.id===c.layout.activeCellId&&(l.preventDefault(),g.isPinching=!0,g.initialDistance=Math.hypot(l.touches[0].pageX-l.touches[1].pageX,l.touches[0].pageY-l.touches[1].pageY),g.initialScale=((m=c.layout.imagesData[e.id])==null?void 0:m.scale)||1)},{passive:!1}),e.addEventListener("touchmove",l=>{if(g.isPinching&&l.touches.length===2){l.preventDefault();const f=Math.hypot(l.touches[0].pageX-l.touches[1].pageX,l.touches[0].pageY-l.touches[1].pageY)/g.initialDistance,h=g.initialScale*f,v=Math.max(1,Math.min(h,5));e.style.backgroundSize=`${v*100}%`}},{passive:!1}),e.addEventListener("touchend",l=>{if(g.isPinching){const m=parseFloat(e.style.backgroundSize)/100;rt(m),g.isPinching=!1,g.initialDistance=0,g.initialScale=1}}),e}const he=Object.freeze(Object.defineProperty({__proto__:null,activate:de,applySharedStyles:Bt,deactivate:ge,getDownloadOptions:pe,processFiles:Ct,removeImage:me,render:kt,selectNewLayout:$t,shuffle:ue,swapImages:Mt},Symbol.toStringTag,{value:"Module"})),ye={layout:he,stitching:Ht};let T=null;function S(){return T}function st(t){c.currentMode===t&&T||(T&&T.deactivate(),c.currentMode=t,T=ye[t],T.activate(),u.layoutModeBtn.classList.toggle("active",t==="layout"),u.stitchingModeBtn.classList.toggle("active",t==="stitching"),ve(),U())}function ve(){T&&T.render()}function I(t,e="success"){u.toast.textContent=t,u.toast.className="fixed bottom-5 right-5 text-white py-2 px-4 rounded-lg shadow-xl translate-x-[120%] transition-transform duration-300";const r={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};u.toast.classList.add(r[e]||"bg-gray-500"),u.toast.classList.remove("translate-x-[120%]"),setTimeout(()=>{u.toast.classList.add("translate-x-[120%]")},3e3)}const J=t=>{const e=parseInt(t.value,10);return isNaN(e)||e<0?0:e};function $(){var o;const t=u.spacingSlider.value,e=u.radiusSlider.value,r=u.colorPicker.value,n=J(u.borderTopInput),s=J(u.borderRightInput),p=J(u.borderBottomInput),d=J(u.borderLeftInput);c.shared.spacing=t,c.shared.radius=e,c.shared.bgColor=r,c.shared.borderWidths={top:n,right:s,bottom:p,left:d},u.spacingValue.textContent=t,u.radiusValue.textContent=e,[u.layoutWrapper,u.stitchingWrapper].forEach(a=>{c.shared.backgroundImage?(a.style.backgroundImage=`url(${c.shared.backgroundImage})`,a.style.backgroundSize="cover",a.style.backgroundPosition="center"):(a.style.backgroundImage="none",a.style.backgroundColor=c.shared.bgColor),a.style.paddingTop=`${c.shared.borderWidths.top}px`,a.style.paddingRight=`${c.shared.borderWidths.right}px`,a.style.paddingBottom=`${c.shared.borderWidths.bottom}px`,a.style.paddingLeft=`${c.shared.borderWidths.left}px`}),(o=S())==null||o.applySharedStyles()}function A(t,e){const r=document.getElementById(t);if(!r||!e||!e.src)return;r.style.backgroundImage=`url('${e.src}')`,r.style.backgroundPosition=e.position,r.classList.add("has-image");const n=r.querySelector(".upload-icon-container");n&&(n.style.display="none");const s=r.clientWidth,p=r.clientHeight;if(!e.width||!e.height||!s||!p){r.style.backgroundSize="cover";return}const d=s/p,i=e.width/e.height,o=e.scale||1;let a;i>d?a=`auto ${o*100}%`:a=`${o*100}% auto`,r.style.backgroundSize=a}function ct(t){const e=document.getElementById(t);if(!e)return;e.style.backgroundImage="",e.classList.remove("has-image");const r=e.querySelector(".upload-icon-container");r&&r.classList.remove("hidden")}function U(){let t=0;c.currentMode==="layout"?t=Object.keys(c.layout.imagesData).length:t=c.stitching.images.length,u.shuffleBtn.disabled=t<2}function at(){const t=document.getElementById("center-content"),e=document.getElementById("layout-wrapper"),r=document.getElementById("aspect-ratio-btns"),n=document.getElementById("canvas-action-toolbar");if(!t||!e||!r||!n){console.error("无法找到布局容器或工具栏元素，计算中止。");return}const s=window.getComputedStyle(t),p=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),d=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),i=t.clientWidth-p;let o=t.clientHeight-d;const a=window.getComputedStyle(n),g=n.offsetHeight+parseFloat(a.marginBottom);o-=g;const l=r.querySelector(".active");if(!l)return;const m=l.dataset.ratio.split("/"),f=parseFloat(m[0])/parseFloat(m[1]);let h,v;i/o>f?(v=o,h=v*f):(h=i,v=h/f),e.style.width=`${h}px`,e.style.height=`${v}px`,n.style.width=`${h}px`}const be=Object.freeze(Object.defineProperty({__proto__:null,applyCanvasStyles:$,applyImageToCell:A,clearImageFromCell:ct,showToast:I,updateCanvasSize:at,updateShuffleButton:U},Symbol.toStringTag,{value:"Module"}));(function(){const t="img.ops-coffee.cn",e=window.location.hostname;e&&e!==t&&e!=="localhost"&&e!=="12.0.0.1"&&(window.location.href=`https://${t}`)})();function we(){u.layoutContainer.innerHTML="";const t={};for(const e in Q){const r=Q[e];t[r.g]||(t[r.g]=[]),t[r.g].push({id:e,...r})}Object.keys(t).sort((e,r)=>e-r).forEach(e=>{const r=w("h4","layout-group-title");r.textContent=`${e} 张图片`,u.layoutContainer.appendChild(r);const n=w("div","layout-thumbnail-grid");t[e].forEach(s=>{const p=Ee(s.id,s);s.id===c.layout.currentLayoutId&&p.classList.add("active"),n.appendChild(p)}),u.layoutContainer.appendChild(n)})}function Ee(t,e){const r=w("div","layout-thumbnail");r.dataset.layout=t;const n=w("div","thumbnail-grid");return n.style.gridTemplateColumns=`repeat(${e.gr[1]}, 1fr)`,n.style.gridTemplateRows=`repeat(${e.gr[0]}, 1fr)`,(e.c||Array.from({length:e.gr[0]*e.gr[1]},()=>({r:1,c:1}))).forEach(p=>{const d=w("div","thumbnail-cell");d.style.gridRowEnd=`span ${p.r}`,d.style.gridColumnEnd=`span ${p.c}`,p.s&&(d.style.gridRowStart=p.s[0],d.style.gridColumnStart=p.s[1]),n.appendChild(d)}),r.appendChild(n),r}function Le(){u.layoutModeBtn.addEventListener("click",()=>st("layout")),u.stitchingModeBtn.addEventListener("click",()=>st("stitching")),u.stitchingUploadBtn.addEventListener("click",()=>u.stitchingUploadInput.click()),u.stitchingUploadInput.addEventListener("change",i=>qt(i.target.files)),u.stitchingDirectionBtns.addEventListener("click",i=>{const o=i.target.closest("button");o&&Ut(o.dataset.direction)}),u.layoutContainer.addEventListener("click",i=>{const o=i.target.closest(".layout-thumbnail");o&&(Nt(o.dataset.layout),document.getElementById("left-sidebar").classList.contains("is-open")&&document.getElementById("mobile-overlay").click())}),u.aspectRatioBtns.addEventListener("click",i=>{const o=i.target.closest("button");o&&Gt(o)}),u.spacingSlider.addEventListener("input",$),u.radiusSlider.addEventListener("input",$),u.borderTopInput.addEventListener("input",$),u.borderRightInput.addEventListener("input",$),u.borderBottomInput.addEventListener("input",$),u.borderLeftInput.addEventListener("input",$),u.colorPicker.addEventListener("input",$),u.downloadBtn.addEventListener("click",jt);const t=document.getElementById("bg-upload-input");document.getElementById("upload-bg-btn").addEventListener("click",()=>t.click()),t.addEventListener("change",i=>{i.target.files&&i.target.files[0]&&Vt(i.target.files[0])}),document.getElementById("remove-bg-btn").addEventListener("click",Zt),document.getElementById("add-text-btn").addEventListener("click",Kt),document.getElementById("add-arrow-btn").addEventListener("click",Qt),document.getElementById("add-rectangle-btn").addEventListener("click",te),document.getElementById("add-ellipse-btn").addEventListener("click",re),document.getElementById("shuffle-btn").addEventListener("click",_t);let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{c.currentMode==="layout"&&(gt(async()=>{const{updateCanvasSize:i}=await Promise.resolve().then(()=>be);return{updateCanvasSize:i}},void 0).then(({updateCanvasSize:i})=>i()),gt(async()=>{const{createGutters:i}=await Promise.resolve().then(()=>ae);return{createGutters:i}},void 0).then(({createGutters:i})=>i()))},150)});const r=document.getElementById("left-sidebar"),n=document.getElementById("right-sidebar"),s=document.getElementById("mobile-overlay"),p=()=>{r.classList.remove("is-open"),n.classList.remove("is-open"),s.classList.add("hidden"),document.body.classList.remove("sidebar-open")};document.getElementById("toggle-left-sidebar").addEventListener("click",i=>{i.stopPropagation(),r.classList.toggle("is-open")?(n.classList.remove("is-open"),s.classList.remove("hidden"),document.body.classList.add("sidebar-open")):p()}),document.getElementById("toggle-right-sidebar").addEventListener("click",i=>{i.stopPropagation(),n.classList.toggle("is-open")?(r.classList.remove("is-open"),s.classList.remove("hidden"),document.body.classList.add("sidebar-open")):p()}),s.addEventListener("click",p);const d=document.getElementById("app-container");document.getElementById("pc-toggle-left").addEventListener("click",()=>d.classList.toggle("left-sidebar-collapsed")),document.getElementById("pc-toggle-right").addEventListener("click",()=>d.classList.toggle("right-sidebar-collapsed")),document.getElementById("stitching-placeholder").addEventListener("click",()=>u.stitchingUploadInput.click()),xe(),document.addEventListener("click",i=>{const o=i.target,a=o.closest(".grid-cell, .text-element-container, .arrow-container, .shape-container"),g=o.closest("#right-sidebar"),l=o.closest("#canvas-action-toolbar");a||g||l||(V(null),F(null),M(null),N(null),G(null))}),document.addEventListener("keydown",i=>{const o=i.target;if(!(o.isContentEditable||o.tagName==="INPUT"||o.tagName==="TEXTAREA")){if(i.key==="Delete"||i.key==="Backspace"){i.preventDefault(),c.shared.selectedTextId?Et():c.shared.selectedArrowId?Lt():c.shared.selectedRectangleId?xt():c.shared.selectedEllipseId&&St();return}if(c.currentMode==="layout"&&c.layout.activeCellId){let g=0,l=0;switch(i.key){case"ArrowUp":l=-1.5;break;case"ArrowDown":l=1.5;break;case"ArrowLeft":g=-1.5;break;case"ArrowRight":g=1.5;break;default:return}i.preventDefault(),oe(g,l)}}})}function xe(){const t=document.getElementById("layout-grid");let e={};function r(){e.startCell&&e.startCell.classList.remove("dragging"),e.activeCell&&e.activeCell.classList.remove("is-panning"),e={isMouseDown:!1,isPanning:!1,isDragging:!1,hasMoved:!1,startCell:null,activeCell:null,startX:0,startY:0,startBgPercentX:0,startBgPercentY:0},document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d)}function n(i,o){if(typeof i!="string")return 50;const a=i.trim();if(a.endsWith("%"))return parseFloat(a);if(a.endsWith("px"))return parseFloat(a)/o*100;switch(a){case"top":case"left":return 0;case"bottom":case"right":return 100;case"center":return 50}return 50}t.addEventListener("mousedown",i=>{if(i.button!==0)return;const o=i.target.closest(".grid-cell");!o||i.target.closest(".remove-image-btn")||(r(),e.isMouseDown=!0,e.startCell=o,e.startX=i.clientX,e.startY=i.clientY,document.addEventListener("mousemove",p),document.addEventListener("mouseup",d))});let s=null;function p(i){var o,a;if(e.isMouseDown){if(e.isPanning){const g=e.activeCell.getBoundingClientRect(),l=(i.clientX-e.startX)/g.width*100,m=(i.clientY-e.startY)/g.height*100;let f=e.startBgPercentX-l,h=e.startBgPercentY-m;f=Math.max(0,Math.min(100,f)),h=Math.max(0,Math.min(100,h)),e.activeCell.style.backgroundPosition=`${f}% ${h}%`;return}if(e.isDragging){const g=(o=document.elementFromPoint(i.clientX,i.clientY))==null?void 0:o.closest(".grid-cell");g!==s&&(s&&s.classList.remove("drag-over"),g&&g!==e.startCell&&g.classList.add("drag-over"),s=g);return}if(!e.hasMoved&&(Math.abs(i.clientX-e.startX)>5||Math.abs(i.clientY-e.startY)>5))if(e.hasMoved=!0,i.altKey&&e.startCell.classList.contains("has-image")){e.isPanning=!0,e.activeCell=e.startCell,e.activeCell.classList.add("is-panning");const g=e.activeCell.id,m=(((a=c.layout.imagesData[g])==null?void 0:a.position)||"50% 50%").split(" "),f=e.activeCell.getBoundingClientRect();e.startBgPercentX=n(m[0],f.width),e.startBgPercentY=n(m.length>1?m[1]:m[0],f.height)}else e.startCell.classList.contains("has-image")&&(e.isDragging=!0,e.startCell.classList.add("dragging"))}}function d(i){var o;if(e.isMouseDown){if(e.isPanning){const a=e.activeCell.id;c.layout.imagesData[a]&&(c.layout.imagesData[a].position=e.activeCell.style.backgroundPosition)}else if(e.isDragging){const a=(o=document.elementFromPoint(i.clientX,i.clientY))==null?void 0:o.closest(".grid-cell");a&&a!==e.startCell&&Mt(e.startCell.id,a.id)}else if(!e.hasMoved)if(e.startCell.classList.contains("has-image"))V(e.startCell.id);else{const a=e.startCell.querySelector('input[type="file"]');a&&a.click()}s&&(s.classList.remove("drag-over"),s=null),r()}}}function Se(){Tt(),we(),Le(),st("layout");const t=u.aspectRatioBtns.querySelector('[data-ratio="1/1"]');t&&t.classList.add("active"),$(),at(),U(),console.log("%c 免费在线拼图工具 %c by ops-coffee.cn ","background: #0052cc; color: #fff; padding: 5px; border-radius: 5px 0 0 5px;","background: #f4f5f7; color: #42526e; padding: 5px; border-radius: 0 5px 5px 0;"),console.log("感谢使用！如果您对这个工具有任何建议，欢迎联系我们。微信公众号搜索：运维咖啡吧")}document.addEventListener("DOMContentLoaded",Se);
